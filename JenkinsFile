pipeline {
    agent {
        docker {
          image 'node:lts-buster-slim'
          args '-p 8000:8000'
        }
    }
    environment {
    CI = 'true'
    HOME = '.'
    npm_config_cache = 'npm-cache'
    }
    stages {
        stage('Build') {
      steps {
        sh 'npm cache clean -f'
        sh 'rm -rf node_modules'
        sh 'rm -rf package-lock.json'
        sh 'npm install'
      }
        }
      //   stage('Test and Build') {
      // parallel {
      //   stage('Run Tests') {
      //     steps {
      //       echo 'Should run test over here'
      //     }
      //   }
      //   stage('Create Build Artifacts') {
      //     steps {
      //       echo 'Should run test over here'
      //     }
      //   }
      // }
      //   }
    }
}
